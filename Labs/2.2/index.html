<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8"/>
    <meta name="description" content="Data Visualisation"/>
    <meta name="keywords" content="HTML, CSS, D3"/>
    <meta name="author" content="Klim Huynh"/>

    <title>Task 2.2 D3 Drawing with Data - Bar Chart</title>

    <script src="https://d3js.org/d3.v5.min.js"></script>

</head>
<body>
  <h1>Drawing with Data</h1>
  
  <script>
      //D3 Code goes here

      var w = 500;
      var h = 100;
      var barPadding = 1; //Separates the bar

      var dataset = [14, 7, 26, 23, 9, 17, 24, 19, 6, 16, 21, 11];

      var svg = d3.select("body")
                  .append("svg")
                  .attr("width", w)
                  .attr("height", h);

      svg.selectAll("rect")
          .data(dataset)
          .enter()
          .append("rect")
          .attr("x", function(d, i) {
              return i * (w / dataset.length); //Divides the bar by the length of the array
          })
          .attr("y", function(d) {
              return h - (d * 4); //Make bars upright and scale up factor of 4
          })
          .attr("width", w/dataset.length-barPadding)
          .attr("height", function(d) {
              return d * 4; //Scale up by factor of 4
          })
          .attr("fill", function (d) {
            return "rgb(" + Math.round(d*10) + ", 0, 200)";
          });

        svg.selectAll("text")
            .data(dataset)
            .enter()
            .append("text")
            .text(function(d) {
                return d;
            })
            .attr("x", function(d, i) {
                return i * (w / dataset.length) + (w / dataset.length - barPadding) / 2; //calculate the x-position by setting it to the left edge of each bar plus half the bar width
            })
            .attr("y", function(d) {
                return h - (d * 4) + 18; //+18
            })
            .attr("font-family", "sans-serif")
            .attr("font-size", "11px")
            .attr("fill", "white")
            .attr("text-anchor", "middle"); //center the text horizontally at the assigned x value

  </script>

  <br>
  <bf>
  <footer style="color:grey">COS30045 Data Visualisation<br>
    Klim Huynh</footer>
</body>
</html>
